<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>CocoaPods 安装和使用</title>
	<style type="text/css">
	p{font-size: 30}
	header{font-size: 45;color: #da5554}
	h1{font-size: 50;color: #000000}
	</style>
</head>
<body>
	<h1>CocoaPods 安装和使用</h1>
	<header>1.如果你的gem太老，可以尝试使用如下命令升级gem：</header>
	<pre>    sudo gem update --system</pre>
	<header>2.另外，ruby的软件源rubygems.org因为使用亚马逊的服务器，所以会被屏蔽了，需要更新一下ruby的源，下面的代码将官方的ruby源途欢成国内淘宝源：</header>
	<pre>    移除现有Ruby默认源：gem sources --remove https://rubygems.org/</pre>
	<pre>    使用新的Ruby源：gem sources -a https://ruby.taobao.org/</pre>
	<pre>    验证新源是否替换成功：gem sources -l</pre>
	<header>3.CocoaPods 的安装方式异常简单，Mac下都自带ruby，使用ruby的gem命令下载安装：</header>
	<pre>    sudo gem install cocoapods (备注：苹果系统升级OS X EL Capitan 后改为：sudo gem install -n /usr/local/bin/cocoapods)</pre>
	<pre>    pod setup</pre>
	<header>4.使用时需要新建一个名为Podfile的文件</header>
	<p>（1）cd 到项目文件的根目录</p>
	<p>（2）vim Podfile</p>
	<p>（3）搜索三方库(JSONModel:库名)：pod search JSONModel</p>
	<p>（4）如下格式，将依赖库名依次列在文件中：</p>
	<div style="color:blue">
	<pre>    platform:ios ,'7.0'</pre>
	<pre>    target 'CocoaPodsInstallDemo' do</pre>
    <pre>    pod 'AFNetworking',    '~>3.0.4'</pre> 
    <pre>    pod 'JSONModel', '~> 1.2.0'</pre> 
    <pre>    end</pre>
    </div>
    <p>（5）写入以上内容后保存退出：(按i可编辑，esc退出编辑，：wq保存退出)</p>
    <header>5.导入第三方库：</header>
    <pre>    pod install （不更新本地仓库：pod install --no-repo-update）</pre>
    <header>6.常见问题：</header>
    <pre>    错误1：Error fetching http://ruby.taobao.org/:bad response Not Found 404 (http://ruby.taobao.org/specs.4.8.gz)</pre>  
    <pre>    解决方案：把安装流程中：gem sources -a http://ruby.taobao.org/ 改为：gem sources -a https://ruby.taobao.org/</pre>
    <pre>    错误2：ERROR:  While executing gem ... (Errno::EPERM) Operation not permitted - /usr/bin/pod</pre>
    <pre>    解决方案：苹果系统升级OS X EL Capitan后会出现的插件错误，将安装流程 4.安装CocoaPods 的 (1)sudo gem install cocoapods ——>改为sudo gem install -n /usr/local/bin cocoapods</pre>
    <pre>    错误3：[!] Unable to satisfy the following requirements: - `AVOSCloud (~> 3.1.6.3)` required by `Podfile`
	  Specs satisfying the `AVOSCloud (~> 3.1.6.3)` dependency were found, but they required a higher minimum deployment target.</pre>
	<pre>    解决方案：安装流程：Podfile文件 中   platform:ios, ‘6.0’  后边的 6.0 是平台版本号 ，一定要加上</pre>
	<header>7.将自己的SDK上传到GitHub上并用cocoapods管理(需要在终端上将工程发布到cocoapods上，这样才能用cocoapods进行管理)</header>
	<p>(1)注册pod账号(如果没有pod账号)：</p>
	<div style="color:red"><pre>    pod trunk register 邮箱账号 [名字]</pre></div>
	<p>(2)如果已经注册，可在终端中输入：pod 查看命令帮助，输入：pod trunk me 可查看自己的账号信息</p>
	<p>(3)cd 到工程目录下，以工程名创建一个.podspec文件，如：cd Demo ---> pod spec create Demo</p>
	<p>(4)然后vi Demo.podspec 进入文件中进行配置</p>
	<pre>   Pod::Spec.new do |s|</pre>
      <pre>     s.name         = 'PPNumberButton'</pre>
  	  <pre>     s.version      = '0.2.0'</pre>
      <pre>     s.license      = { :type => "MIT", :file => "LICENSE" } </pre>
      <pre>     s.homepage     = 'https://github.com/jkpang/PPNumberButton.git'</pre>
      <pre>     s.authors      = { "jkpang" => "jkpang@outlook.com" }</pre>
      <pre>     s.summary      = '类似京东淘宝商品数量的加减按钮,可定制程度高,使用简单!'</pre>
      <pre>     s.platform     = :ios, '7.0'</pre>
      <pre>     s.source       = { git: 'https://github.com/jkpang/PPNumberButton.git', :tag => s.version.to_s}</pre>
      <pre>     s.source_files = 'PPNumberButton/PPNumberButton/*.{h,m}'</pre>
      <pre>     s.frameworks   =  'UIKit'</pre>
      <pre>     s.requires_arc = true</pre>
    <pre>   end</pre>
    <p>(5)配置完成之后保存并退出，然后在终端上输入：git add Demo.podspec</p>
    <p>(6)然后 git commit -m 'add Demo.podspec' 添加到git上</p>
    <p>(7)再用git push -u origin master 同步到远程端</p>
    <p>(8)然后需要创建工程的tag</p>
    <pre>   git tag '0.0.1' </pre>
    <pre>	git add * </pre>
    <pre>	git commit -m 'add tag' </pre>
    <pre>	git push origin 0.0.1 </pre>
    <pre>  (9)再输入pod spec lint 来检测一下是否有错误或警告，有则改之，每次本地的工程中有改动并上传到GitHub上之后需要改变tag 否则就会找不到你所改动的，在改变了tag 之后需要将.podspec文件中的s.version和s.source 的tag 改成同样的值。
    </pre>
    <pre>如果没有错误的话就可以发布了 输入：pod trunk push</pre>
</body>
</html>